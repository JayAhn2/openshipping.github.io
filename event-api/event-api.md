# Event API

## Targeted Scope, Processes and Technology

Event API has been driven primarily by participating shipping lines since the October 2018 workshop under OpenShipping.org. The majority of the content has been agreed among all OpenShipping.org participants – importantly decisions about which existing standard to build upon (listed on a later slide). 

But the shipping lines’ focus in establishing the Event API is specifically based upon use cases around: 

* Shipping milestone planning and execution,
* Shipping events, particularly such generated by emerging IoT device technologies

In the spirit of OpenShipping.org, our technical starting point is naturally modern HTTP-based API technologies. 

Functionally, our ambition has been to specify a design which: 
* Is common among participating carriers’ booking, planning and operational processes. 
* Doesn’t deviate significantly from known back office systems, ensuring that subsequent data mapping is manageable.
* Is rooted in – and builds upon – existing standards.
* Breaks down barriers to entry by applying generic, logical models and self-explanatory naming. 

Common for the targeted use cases, legacy systems and emerging IoT devices is that communication is event-driven. What this means is that a heterogeneous landscape of actors (human, organizations, devices, etc) emit statuses on a near-real time, best-effort basis. Similarly, a heterogeneous landscape of actors receive and react on these events. The individual event aims to communicate what has happened, but does not imply how this information is to be used – it is left to the receiver how to action received events, including keeping state.This is in contrast to other communication paradigms, notably REST, which is very commonly implemented over APIs, leveraging HTTP’s verbiage for also communicating how data is intended to be stored and manipulated. This is a very practical pattern in many situations, but less suitable for the targeted use cases in the heterogeneous landscape of shipping. Practically, this results in an all HTTP POST API, requiring business logic to properly react. As mentioned above, 1) such business events exist in legacy systems throughout the industry, and 2) significant emphasis has been put on the aspects of genericness, logic and simplicity. 

Please note that the current version of the API is a baseline, not necessarily a final version. It covers the particular scope just described, and there is obviously many other aspects to global transport and trade which may be added in future releases. 

### UN/CEFACT Foundation

(/images/CEFACT-BSP.png "UN/CEFACT Buy-Ship-Pay")

The Event API allows for publishing Consignments and Transport Equipment as events through a POSTing alongside the events, meant to serves as the context of those subsequent events. 
These are direct implementations of the Consignment and Transport Equipment classes of the UN/CEFACT Supply Chain Reference Data Model (SCRDM)’s Buy-Ship-Pay model. The Consignment represents the contract of transport and the Transport Equipment used for that transport – all of interest to varying parties involved at each level. 
These form a hierarchy, with Transport Equipment sitting underneath a Consignment. Consignment also hold parties. Planned events relate to Consignments; Estimated and Actual events relate to Transport Equipment. 
From the perspective of common carrier business processes, the Consignment roughly represents the booking confirmation, whereas the Transport Equipment represents the equipment matching (when a physically identified container has been assigned to the consignment). 
Shipment plays an important role, but has not yet been included in this first version of the API entirely due to scope confinement. The Shipment class represents the traded of goods inside the containers, and are of important relevance to authorities, financial institutions, sellers and sellers. It is worth noting that LCL tracking should be done through the Shipment class, so the current version of the API is only meant to deal with FCL. We consider adding the Shipment class a natural future extension of the API. 
It is also worth pointing out that consignments are commonly referred to as “shipments” in the carrier business (because carriers don’t need to distinguish). However, in order to accommodate the larger industry, and for general clarity, we fully embrace UN/CEFACT’s clear definitions, explicitly distinguishing between Trade Data (yellow) and Transport Data (blue). 
Movement and Means are implemented in the Milestone events. Both are represented in the resource model, available through the Milestone event endpoints. 
